<!-- HEADER CON FONDO VERDE -->
<header class="header-verde">
  <div class="header-top">
    <div class="logo" routerLink="/">ROYEM S.A.C. - EPP & FerreterÃ­a</div>
    
    <div class="header-actions">
      <div class="usuario-info" *ngIf="usuarioActual">
        <span>Hola, {{usuarioActual.nombre}}</span>
        <button class="btn-logout" (click)="logout()">Cerrar SesiÃ³n</button>
      </div>
      <button class="btn-login" routerLink="/login" *ngIf="!usuarioActual">
        ğŸ‘¤ Iniciar SesiÃ³n
      </button>
      
      <!-- âœ… CARRITO: Solo visible para CLIENTES (no para ADMIN) -->
      <button class="cart-button" routerLink="/carrito" *ngIf="usuarioActual && !esAdmin()">
        ğŸ›’ Carrito
        <span class="cart-count">{{cartCount}}</span>
      </button>
    </div>
  </div>

  <!-- BARRA DE NAVEGACIÃ“N VERDE -->
  <nav class="nav-verde">
    <a routerLink="/">Inicio</a>
    
    <!-- âœ… MIS PEDIDOS: Solo visible para CLIENTES (no para ADMIN) -->
    <a routerLink="/mis-pedidos" *ngIf="usuarioActual && !esAdmin()">Mis Pedidos</a>
    
    <!-- âœ… ADMINISTRADOR: Solo visible para ADMIN -->
    <a routerLink="/admin" *ngIf="esAdmin()" class="admin-link">ğŸ›¡ï¸ Administrador</a>
    
    <!-- âœ… CATEGORÃAS: Solo visible para CLIENTES o usuarios NO logueados (no para ADMIN) -->
    <div class="dropdown-categorias" 
         *ngIf="!esAdmin()"
         (mouseenter)="mostrarMenuProductos = true" 
         (mouseleave)="mostrarMenuProductos = false">
      <a class="dropdown-trigger">
        CategorÃ­as 
        <span class="dropdown-arrow">â–¼</span>
      </a>
      
      <!-- MEGA MENÃš VERDE FLOTANTE -->
      <div class="mega-menu-verde" *ngIf="mostrarMenuProductos">
        <div class="categorias-grid">
          <!-- COLUMNA DE CATEGORÃA -->
          <div class="categoria-column" *ngFor="let cat of categoriasMenu; let last = last" [class.ultima-columna]="last">
            <h3 class="categoria-titulo" (click)="navegarACategoria(cat.nombre)">
              {{ cat.nombre }}
            </h3>
            
            <ul class="subcategorias-list">
              <li *ngFor="let sub of cat.subcategorias">
                <a (click)="navegarACategoria(sub)">{{ sub }}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <a href="#">Nosotros</a>
    <a href="#">ContÃ¡ctanos</a>
  </nav>
</header>

<!-- CONTENIDO DINÃMICO -->
<router-outlet></router-outlet>

<!-- FOOTER -->
<footer>
  ROYEM S.A.C. Â© 2025 Â· Cajamarca, PerÃº Â· 
  WhatsApp: <a href="https://wa.me/51931440451" style="color: white;">+51 931 440 451</a> Â· 
  Correo: <a href="mailto:seguridadindustrial_royem@hotmail.com" style="color: white;">seguridadindustrial_royem&#64;hotmail.com</a>
</footer>