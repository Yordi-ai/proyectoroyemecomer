<!-- HEADER CON FONDO VERDE -->
<header class="header-verde">
  <div class="header-top">
    <div class="logo" routerLink="/">ROYEM S.A.C. - Soluciones en Proteccion Personal & Servicios ferreteros</div>
    
    <div class="header-actions">
      <div class="usuario-info" *ngIf="usuarioActual">
        <span>Hola, {{usuarioActual.nombre}}</span>
        <button class="btn-logout" (click)="logout()">Cerrar SesiÃ³n</button>
      </div>
      <button class="btn-login" routerLink="/login" *ngIf="!usuarioActual">
        ğŸ‘¤ Iniciar SesiÃ³n
      </button>
      
      <button class="cart-button" routerLink="/carrito" *ngIf="usuarioActual && !esAdmin()">
        ğŸ›’ Carrito
        <span class="cart-count">{{cartCount}}</span>
      </button>
    </div>
  </div>

  <!-- BARRA DE NAVEGACIÃ“N VERDE -->
  <nav class="nav-verde">
    <a routerLink="/">Inicio</a>
    
    <a routerLink="/mis-pedidos" *ngIf="usuarioActual && !esAdmin()">Mis Pedidos</a>
    
    <a routerLink="/admin" *ngIf="esAdmin()" class="admin-link">ğŸ›¡ï¸ Administrador</a>
    
    <!-- âœ… CATEGORÃAS: MENÃš DESPLEGABLE MEJORADO -->
    <div class="dropdown-categorias" 
         *ngIf="!esAdmin()"
         (mouseenter)="mostrarMenuProductos = true" 
         (mouseleave)="mostrarMenuProductos = false; desactivarCategoria()">
      <a class="dropdown-trigger">
        CategorÃ­as 
        <span class="dropdown-arrow">â–¼</span>
      </a>
      
      <!-- âœ… MEGA MENÃš VERDE CON DOS COLUMNAS -->
      <div class="mega-menu-verde" *ngIf="mostrarMenuProductos">
        <div class="menu-layout">
          
          <!-- âœ… COLUMNA IZQUIERDA: TÃTULOS PRINCIPALES -->
          <div class="titulos-principales">
            <div 
              class="titulo-item" 
              *ngFor="let cat of categoriasMenu; let i = index"
              (mouseenter)="activarCategoria(i)"
              [class.activo]="categoriaActivaIndex === i"
              (click)="navegarACategoria(cat.nombre)">
              {{ cat.nombre }}
              <span class="flecha-derecha">â€º</span>
            </div>
          </div>

          <!-- âœ… COLUMNA DERECHA: SUBCATEGORÃAS -->
          <div class="subcategorias-panel">
            <div *ngIf="categoriaActivaIndex !== null" class="subcategorias-contenido">
              <h3 class="subcategorias-titulo">
                {{ categoriasMenu[categoriaActivaIndex].nombre }}
              </h3>
              <ul class="subcategorias-list">
                <li *ngFor="let sub of categoriasMenu[categoriaActivaIndex].subcategorias">
                  <a (click)="navegarACategoria(sub)">{{ sub }}</a>
                </li>
              </ul>
            </div>
            
            <!-- âœ… MENSAJE INICIAL -->
            <div *ngIf="categoriaActivaIndex === null" class="mensaje-inicial">
              <span>Selecciona una categorÃ­a</span>
            </div>
          </div>

        </div>
      </div>
    </div>
    
    <a href="#">Nosotros</a>
    <a href="#">ContÃ¡ctanos</a>
  </nav>
</header>

<!-- CONTENIDO DINÃMICO -->
<router-outlet></router-outlet>

<!-- FOOTER -->
<footer>
  ROYEM S.A.C. Â© 2025 Â· Cajamarca, PerÃº Â· 
  WhatsApp: <a href="https://wa.me/51931440451" style="color: white;">+51 931 440 451</a> Â· 
  Correo: <a href="mailto:seguridadindustrial_royem@hotmail.com" style="color: white;">seguridadindustrial_royem&#64;hotmail.com</a>
</footer>