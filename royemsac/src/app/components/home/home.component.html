<!-- HERO SECTION -->
<section class="hero">
  <div class="hero-background"></div>
  <div class="hero-content">
    <span class="hero-badge">ğŸ›¡ï¸ ProtecciÃ³n Certificada</span>
    <h1>Equipos de ProtecciÃ³n Personal para <span>MinerÃ­a e Industria</span></h1>
    <p>
      Protege a tu personal con productos certificados: respiradores, cascos, guantes,
      lentes de seguridad, arneses y mÃ¡s.
    </p>
    <div class="hero-buttons">
      <button class="btn-primary" (click)="scrollToProducts()">
        ğŸ“¦ Ver CatÃ¡logo
      </button>
      <a routerLink="/contacto" class="btn-secondary">
        ğŸ“ Solicitar CotizaciÃ³n
      </a>
    </div>
    
    <div class="hero-stats">
      <div class="stat">
        <span class="stat-number">500+</span>
        <span class="stat-label">Productos</span>
      </div>
      <div class="stat">
        <span class="stat-number">10+</span>
        <span class="stat-label">AÃ±os</span>
      </div>
      <div class="stat">
        <span class="stat-number">1000+</span>
        <span class="stat-label">Clientes</span>
      </div>
    </div>
  </div>
</section>

<!-- BARRA DE BÃšSQUEDA Y FILTROS -->
<div class="search-section">
  <div class="search-container">
    <div class="search-input-wrapper">
      <span class="search-icon">ğŸ”</span>
      <input 
        type="text" 
        [(ngModel)]="terminoBusqueda" 
        (keyup.enter)="buscarProductos()"
        placeholder="Buscar productos... (ej: casco, guantes, mascarilla)"
        class="search-input">
    </div>
    
    <select [(ngModel)]="categoriaSeleccionada" (change)="filtrarPorCategoria()" class="filter-select">
      <option value="">Todas las categorÃ­as</option>
      <option *ngFor="let cat of categorias" [value]="cat">{{cat}}</option>
    </select>
    
    <button (click)="buscarProductos()" class="btn-search">
      ğŸ” Buscar
    </button>
    
    <button (click)="limpiarFiltros()" class="btn-clear">
      Limpiar filtros
    </button>
  </div>
</div>

<!-- CATEGORÃAS RÃPIDAS -->
<section class="categories-section">
  <div class="container">
    <div class="categories-grid">
      <div class="category-card" *ngFor="let cat of categorias" (click)="categoriaSeleccionada = cat; filtrarPorCategoria()">
        <div class="category-icon">
          {{ obtenerIconoCategoria(cat) }}
        </div>
        <span class="category-name">{{ cat }}</span>
      </div>
    </div>
  </div>
</section>

<!-- PRODUCTOS -->
<main class="products-section" id="productsGrid">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Productos Destacados</h2>
      <span class="products-count">{{ productos.length }} productos encontrados</span>
    </div>
    
    <!-- Sin resultados -->
    <div *ngIf="productos.length === 0" class="empty-state">
      <div class="empty-icon">ğŸ“¦</div>
      <h3>No se encontraron productos</h3>
      <p>Intenta con otros tÃ©rminos de bÃºsqueda o categorÃ­a</p>
      <button class="btn-primary" (click)="limpiarFiltros()">Ver todos los productos</button>
    </div>
    
    <!-- Grid de productos -->
    <div class="products-grid" *ngIf="productos.length > 0">
      <!-- âœ… AGREGADO: trackBy para optimizar renderizado -->
      <div class="product-card" *ngFor="let producto of productos; trackBy: trackByProductoId">
        
        <!-- Parte clickeable para ir al detalle -->
        <div class="product-clickable" [routerLink]="['/producto', producto.id]">
          
          <!-- Imagen -->
          <div class="product-image">
            <!-- âœ… CAMBIADO: Ahora usa producto.imagenUrl pre-procesado -->
            <img 
              [src]="producto.imagenUrl" 
              [alt]="producto.nombre"
              onerror="this.src='https://via.placeholder.com/300x200?text=Sin+Imagen'"
              loading="lazy">
            
            <!-- Badge de categorÃ­a -->
            <span class="product-badge">{{ producto.categoria }}</span>
          </div>
          
          <!-- Info del producto -->
          <div class="product-info">
            <h3 class="product-name">{{ producto.nombre }}</h3>
            <p class="product-category">{{ producto.categoria }}</p>
          </div>
        </div>
        
        <!-- Footer con precio y botÃ³n -->
        <div class="product-footer">
          <div class="product-price">
            <span class="price-currency">S/</span>
            <span class="price-amount">{{ producto.precio.toFixed(2) }}</span>
          </div>
          <button class="btn-add-cart" (click)="addToCart(producto)">
            ğŸ›’ AÃ±adir
          </button>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- FEATURES / POR QUÃ‰ ELEGIRNOS -->
<section class="features-section">
  <div class="container">
    <h2 class="section-title-light">Â¿Por quÃ© elegir ROYEM S.A.C.?</h2>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">ğŸ›¡ï¸</div>
        <h4>Productos Certificados</h4>
        <p>Todos nuestros EPP cumplen con las normas ANSI, OSHA y certificaciones peruanas.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">ğŸšš</div>
        <h4>EnvÃ­o a Todo PerÃº</h4>
        <p>Llegamos a todas las regiones del paÃ­s. EnvÃ­o gratis en compras mayores a S/500.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">ğŸ’°</div>
        <h4>Precios Competitivos</h4>
        <p>Los mejores precios del mercado sin sacrificar la calidad de los productos.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">ğŸ¯</div>
        <h4>AsesorÃ­a Especializada</h4>
        <p>Te ayudamos a elegir el EPP adecuado para tu industria y necesidades.</p>
      </div>
    </div>
  </div>
</section>

<!-- TOAST NOTIFICATION -->
<div class="toast-container" *ngIf="mostrarToast">
  <div class="toast">
    <span class="toast-icon">âœ…</span>
    <span class="toast-message">{{ mensajeToast }}</span>
  </div>
</div>